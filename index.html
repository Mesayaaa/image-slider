<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="loader">
        <div class="loader-content">
            <div class="heart-loader"></div>
            <div class="loading-text">Loading memories...</div>
        </div>
    </div>
    <div style="margin-left: 20px; margin-right: 20px;">
        <h5 style="text-align: center;">MAAF TAPI MAS MALU BGTT APALAGI KALO KM KLIK YANG PALING BAWAH SBELUM MULAI BACAA.. volumenya pelan aja ya, malu</h5>
    </div>
    <div class="carousel">
        <div class="list">
            <div class="item">
                <img src="images/cth5.jpg">
                <div class="introduce">
                    <div class="title">Pertama kaliii mas makan es krim enak dan apaa sayang? sehatt? WKWKWKWKW</div>
                    <div class="des">mam es krim enak juga ya sayang ya WKWKWKWKW semenjak mas sama km, mas jadi tau ada banyak macam es krim yang belum mas coba. mas kira cuma es krimnya yang enak, ternyata makan bareng sama km ngebuat makin better ternyata wkwkw</div>
                </div>
            </div>

            <div class="item">
                <img src="images/cth0.jpg" style="width: auto; height: 80%">
                <div class="introduce">
                    <div class="title">Kita keliling alsutt mencari kitab suci (bukan ya WKWKWKWK)</div>
                    <div class="des">LUCUUU BGTTT ADA POTO INI WKWKWKW seruu bgtttt kita jalan-jalan sampe akhirnya km ketemu trus ngobrol sama temen mas pertama kali WKWKWKWK mas seneng bgt jalan-jalan bareng km, rasanya lebih fun padahal cuma berdua, tapi kalo berduanya sama km, km ajak mas kemana aja juga mas gas-gas aja ini sayang WKWKKWKW</div>
                </div>
            </div>

            <div class="item">
                <img src="images/cth1.jpg">
                <div class="introduce">
                    <div class="title">ALAMAKK DI ALSUT LAGI WKWKWKKW</div>
                    <div class="des">tapii ini asik jugaa pas kita ke ikea bareng kayaaa seruuu bgtttt WKWKWKWKW kangen kesini sama km hehe tapi beneran mas mau kesini lagi sama km, walopun km sengaja pake topi karna rambut km kena pas pake helm, tapi sbelum km brangkat, mas uda liat pap km foto ini rambut km bagus, km MAKINNN cantikkkk</div>
                </div>
            </div>

            <div class="item">
                <img src="images/vior.png" style="width: 100%; height: 100%">
                <div class="introduce">
                    <div class="title">entah kenapa jadi keinget begini masnya sama ini sayang alamak</div>
                    <div class="des">ini mas gabisa ngomong banyak ya WKWKKWKWKW</div>
                </div>
            </div>

            <div class="item">
                <img src="images/cth2.jpg">
                <div class="introduce">
                    <div class="title">ikutt natall km bareng temen-temen km</div>
                    <div class="des">temen temen mas juga ikut sihh, walopun tiba-tiba mereka jadi berulah ingin mas slepet, cuma jangan deh sayang soalnya uda mau nemenin masnya WKWKWKW walopun banyak tantangan disini tapi mas seneng bisa dateng, bisa liat km jugaa, but mas sangat sangat sangat sayang sama km (uda dari dulu sih cuma mas stiap liat km bikin sg yang km nya seneng, mas uda ikut seneng)</div>
                </div>
            </div>

            <div class="item">
                <img src="images/cth4.jpg">
                <div class="introduce">
                    <div class="title">NATALANN LAGIIII????</div>
                    <div class="des">WAHHH KALOO INI SIHH DARI PERSIAPANN NATALANNYA SAMA PAS NATALANN SIH DEBESS YAA SERUU BGTTTT, MAS GABAKALAN BISA LUPA INI SIH ALAMAKK, mulai dari nyiapin di greja bareng km juga, abis itu nyiapin di gedungnya jugaa, abis ituu NATALANNYAA PALING SERU BGTT BGTTT BGTTTTT, ketemu temen km juga si jopin (versi alim (?)) WKWKWKKWW tapii semuanya seru sampe mas sangat bangga kalo km bisa sebagus inii tamborinnya, INGETT INI JADI KEINGET LAGI KALO KM KERENNN BGTTT (INI DISINI GIMANA YA NGASI EMOT NANGISNYA), rambut km lucuu, randomnya km lucuu, km lucuuuu, mas masi inget bgt feeling bareng sama km, bukan karna mas bucin ato apa (emang sayang sih sama km), tapi mas inget bgtt ajaa momen' bareng km nya</div>
                </div>
            </div>

            <div class="item">
                <img src="images/cth3.jpg">
                <div class="introduce">
                    <div class="title">NATALANN LAGIIII????(1) WKWKKWWKKW</div>
                    <div class="des">adaaa foto ini lagii WKWKWKKWKW tapi ndaa tau yaa lucu ajaa mas liat poto ini apalagii km makee kostum ini u look so pretty n cute</div>
                </div>
            </div>

            <div class="item">
                <div class="introduce" style="padding-top: 15%; padding-bottom: 15%; display: flex; justify-content: center; align-items: center;">
                    <div style="color: white;
                              display: inline-block;
                              padding: 20px 30px;
                              font-weight: bold;
                              background: linear-gradient(135deg, rgba(0,0,0,0.8), rgba(0,0,0,0.6));
                              border-radius: 25px;
                              margin: 0 15px;
                              font-size: clamp(16px, 3.5vw, 22px);
                              text-align: center;
                              max-width: 90%;
                              box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                              transform: translateY(0);
                              transition: all 0.3s ease;
                              cursor: default;
                              animation: fadeIn 1s ease-out;"
                              onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.3)'"
                              onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0,0,0,0.2)'">
                        mas bikin ini uda kaya orang bener aja ya WKWKWKKWKW mas pun nda espek bikin ini buat km sayang. cuma smoga km suka
                    </div>
                </div>
            </div>
            </div>

        </div>
        <div class="arrows">
            <button id="prev"><</button>
            <button id="next">></button>
        </div>
        
        <div class="button-container">
            <div class="arrow">&#8595;</div>
            <button id="playAudio">MAS NYANYI BUAT KM WKWKWKW</button>
        </div>
    </div>

    <audio id="backgroundAudio" loop>
        <source src="blue_yungkai_for_her.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div class="video-popup" id="videoPopup1">
        <div class="video-container">
            <div class="video-wrapper">
                <video id="videoPlayer1" muted playsinline disablepictureinpicture>
                    <source src="images/ayam.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <button class="close-video" id="closeVideo1">&times;</button>
            </div>
        </div>
    </div>

    <div class="video-popup" id="videoPopup2">
        <div class="video-container">
            <div class="video-wrapper">
                <video id="videoPlayer2" controls muted>
                    <source src="images/dress.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <button class="close-video" id="closeVideo2">&times;</button>
            </div>
        </div>
    </div>

    <div class="video-popup" id="videoPopup3">
        <div class="video-container">
            <div class="video-wrapper">
                <video id="videoPlayer3" controls muted>
                    <source src="images/ikea.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <button class="close-video" id="closeVideo3">&times;</button>
            </div>
        </div>
    </div>

    <div class="video-popup" id="videoPopup4">
        <div class="video-container">
            <div class="video-wrapper">
                <video id="videoPlayer4" controls muted>
                    <source src="images/lucu.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <button class="close-video" id="closeVideo4">&times;</button>
            </div>
        </div>
    </div>

    <div class="video-popup" id="videoPopup5">
        <div class="video-container">
            <div class="video-wrapper">
                <video id="videoPlayer5" controls muted>
                    <source src="images/natal.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <button class="close-video" id="closeVideo5">&times;</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        const audioPlayer = document.getElementById('backgroundAudio');
        const playButton = document.getElementById('playAudio');
        
        // Tambahkan array untuk melacak particle yang aktif
        const activeParticles = [];
        const MAX_PARTICLES = 20; // Batasi jumlah maksimal particle
        
        function createLoveParticle(x, y) {
            if (activeParticles.length >= MAX_PARTICLES) return;
            
            const particle = document.createElement('div');
            particle.className = 'love-particle';
            particle.innerHTML = ['â™¥', 'ðŸ’•', 'ðŸ’—'][Math.floor(Math.random() * 3)];
            particle.style.left = x + 'px';
            particle.style.top = y + 'px';
            
            const randomX = (Math.random() - 0.5) * 200;
            const randomRotate = (Math.random() - 0.5) * 360;
            particle.style.setProperty('--x', randomX + 'px');
            particle.style.setProperty('--r', randomRotate + 'deg');
            
            // Tambahkan transition untuk smooth appearance
            particle.style.opacity = '0';
            particle.style.transform = 'scale(0.5)';
            
            document.body.appendChild(particle);
            
            // Force reflow
            void particle.offsetWidth;
            
            // Animate in
            particle.style.opacity = '1';
            particle.style.transform = 'scale(1)';
            
            activeParticles.push(particle);
            
            // Smooth fade out
            setTimeout(() => {
                particle.style.opacity = '0';
                particle.style.transform = 'scale(0.5) translateY(-20px)';
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                    const index = activeParticles.indexOf(particle);
                    if (index > -1) {
                        activeParticles.splice(index, 1);
                    }
                }, 400);
            }, 3600);
        }
        
        let isCreatingParticles = false;
        let particleInterval;
        
        function startParticleCreation(e) {
            if (isCreatingParticles) return;
            isCreatingParticles = true;
            
            const buttonRect = playButton.getBoundingClientRect();
            const centerX = buttonRect.left + buttonRect.width / 2;
            const centerY = buttonRect.top;
            
            // Fungsi untuk membuat satu batch particle
            function createParticleBatch() {
                for (let i = 0; i < 5; i++) { // Kurangi jumlah particle per batch
                    createLoveParticle(
                        centerX + (Math.random() - 0.5) * 200,
                        centerY + (Math.random() - 0.5) * 100
                    );
                }
            }
            
            // Buat batch pertama
            createParticleBatch();
            
            // Set interval untuk batch berikutnya
            particleInterval = setInterval(createParticleBatch, 2000); // Interval lebih lama
        }
        
        function stopParticleCreation() {
            isCreatingParticles = false;
            clearInterval(particleInterval);
        }
        
        let currentVideoIndex = 0;
        const totalVideos = 5;
        let isVideoPlaying = false;
        
        function showNextVideo() {
            // Hide current video if any
            const currentPopup = document.getElementById(`videoPopup${currentVideoIndex}`);
            if (currentPopup) {
                currentPopup.classList.remove('show');
                const currentPlayer = document.getElementById(`videoPlayer${currentVideoIndex}`);
                if (currentPlayer) {
                    currentPlayer.pause();
                    currentPlayer.currentTime = 0;
                }
            }
            
            // Update index and show next video
            currentVideoIndex = (currentVideoIndex % totalVideos) + 1;
            const nextPopup = document.getElementById(`videoPopup${currentVideoIndex}`);
            const nextPlayer = document.getElementById(`videoPlayer${currentVideoIndex}`);
            
            if (nextPopup && nextPlayer) {
                nextPopup.classList.add('show');
                try {
                    const playPromise = nextPlayer.play();
                    if (playPromise !== undefined) {
                        playPromise.catch(error => {
                            console.log("Video autoplay prevented:", error);
                        });
                    }
                } catch (error) {
                    console.log("Error playing video:", error);
                }
            }
        }
        
        function stopAllVideos() {
            isVideoPlaying = false;
            for(let i = 1; i <= totalVideos; i++) {
                const popup = document.getElementById(`videoPopup${i}`);
                const player = document.getElementById(`videoPlayer${i}`);
                if (popup && player) {
                    popup.classList.remove('show');
                    player.pause();
                    player.currentTime = 0;
                }
            }
        }
        
        // Update button click handler
        playButton.addEventListener('click', function(e) {
            if (audioPlayer.paused) {
                audioPlayer.play().then(() => {
                    playButton.textContent = 'kalo mau ngepause, klik lagi aja yaa';
                    startParticleCreation(e);
                    isVideoPlaying = true;
                    showNextVideo();
                }).catch(error => {
                    console.log("Audio autoplay prevented:", error);
                });
            } else {
                audioPlayer.pause();
                playButton.textContent = 'MAS NYANYI BUAT KM WKWKWKW';
                stopParticleCreation();
                stopAllVideos();
            }
        });
        
        // Handle video end
        for(let i = 1; i <= totalVideos; i++) {
            const videoPlayer = document.getElementById(`videoPlayer${i}`);
            const closeButton = document.getElementById(`closeVideo${i}`);
            
            if (videoPlayer) {
                videoPlayer.addEventListener('ended', function() {
                    const popup = document.getElementById(`videoPopup${i}`);
                    if (popup) {
                        popup.classList.remove('show');
                    }
                });
            }
            
            if (closeButton) {
                closeButton.addEventListener('click', function() {
                    const popup = document.getElementById(`videoPopup${i}`);
                    const player = document.getElementById(`videoPlayer${i}`);
                    if (popup && player) {
                        popup.classList.remove('show');
                        player.pause();
                        player.currentTime = 0;
                    }
                });
            }
        }

        // Add loader handling
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                const loader = document.querySelector('.loader');
                loader.classList.add('fade-out');
                setTimeout(() => {
                    loader.style.display = 'none';
                }, 500);
            }, 1500);
        });

        // Add smooth scroll behavior
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>