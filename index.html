<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <div class="intro-container">
        <div class="intro-content">
            <div class="intro-text">
                <h1 class="intro-title">alooo sayang â™¥</h1>
                <p class="intro-message" style="font-size: 1.2em; font-weight: bold;">happy valentine's day!</p>
                <p class="intro-message">btw mas punya something buatt km</p>
            </div>
            <button class="start-button" style="display: block; margin: 0 auto;">
                <span>next</span>
            </button>
        </div>
    </div>
    <div class="loader" style="display: none;">
        <div class="loader-content">
            <div class="loading-text">
                <span>w</span>
                <span>a</span>
                <span>i</span>
                <span>t</span>
                <span>t</span>
                <span> </span>
                <span>c</span>
                <span>a</span>
                <span>n</span>
                <span>t</span>
                <span>i</span>
                <span>k</span>
                <span>k</span>
                <span>.</span>
                <span>.</span>
                <span>.</span>
            </div>
            <div class="loading-progress">
                <div class="progress-bar"></div>
            </div>
        </div>
    </div>
    <div style="margin-left: 20px; margin-right: 20px;">
        <h5 style="text-align: center;">MAAV TAPI MAS MALU BGTT APALAGI KALO KM KLIK YANG PALING BAWAH SBELUM MULAI BACAA.. volumenya pelan aja ya, malu</h5>
    </div>
    <div class="carousel">
        <div class="list">
            <div class="item">
                <div class="introduce"
                    style="padding-top: 15%; padding-bottom: 15%; display: flex; justify-content: center; align-items: center;">
                    <div style="color: white;
                                          display: inline-block;
                                          padding: 20px 30px;
                                          font-weight: bold;
                                          background: linear-gradient(135deg, rgba(255,107,107,0.6), rgba(255,142,142,0.8));
                                          border-radius: 25px;
                                          margin: 0 15px;
                                          font-size: clamp(16px, 3.5vw, 22px);
                                          text-align: center;
                                          max-width: 90%;
                                          box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                                          transform: translateY(0);
                                          transition: all 0.3s ease;
                                          cursor: default;
                                          animation: fadeIn 1s ease-out;"
                        onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.3)'"
                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0,0,0,0.2)'">
                        mas bikin ini uda kaya orang bener aja ya WKWKWKKWKW mas pun nda espek bikin ini buat km sayang. mas mau ngomong dikit ajaa disini. mas seneng kalo km bawa mas di idup km, mas jadi merasa ada buat km, mau support km di smua hal yang baik, jadi mas bakal selalu bisa & ada buat km, tapi kalo ada something yang bisa bikin km lebi nyaman, km juga bole bilang ko sayang biar mas bisa lebi bikin km nyaman dehh, kaloo kita sama sama nyaman kan enak yaaa. syudaa. love u sayang. OIYAAA i'll give u disss.
                        
                        <!-- Update bagian ticket design -->
                        <div class="ticket-container">
                            <div class="ticket">
                                <div class="ticket-header">
                                    <div class="heart-icon">â™¥</div>
                                    <div class="ticket-title">FREE HUGS TICKET</div>
                                    <div class="heart-icon">â™¥</div>
                                </div>
                                <div class="ticket-content">
                                    <div class="ticket-info">
                                        <span>From: Mas</span>
                                        <span>To: Km</span>
                                    </div>
                                   
                                    <div class="ticket-footer">
                                        <div class="barcode">|||||| |||| |||||| |||</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- pertama kali muncul -->
            <div class="item">
                <img src="images/cth5.jpg" style="border-radius: 20px;">
                <div class="introduce">
                    <div class="title">Pertama kaliii mas makan es krim enak sama apaa sayang? betulll, lebi sehatt WKWKWKWKW</div>
                    <div class="des">setelaa mas sekian lama gaa ke mall akhirnya mas kesini lagi (terakhir yaa yang pas sama km samaa ka novi juga (stiker nangis)). skalinyaa mas pergi lagi, lucuu jugaa ternyata perginya sama km lagi WKWKWKWKW akhirnya mas baruu nyobain es krim sour sally yang mas kepengen jugaa dari lamaa, tapi karna kedistract banyak hal jadi lupaa sama ini. semenjak mas sama km, kepala mas cukup terbuka kalo ada banyak macam es krim yang belum mas tau juga (ga cuma es krim ini sihh, kalo masalaa makanan dkk km jagonya yaa sayang ya, uda trusted WKWKWWKWK) pas mas cobain es krimnya, mas kira cuma es krimnya yang enak, dimakan bareng orang lain lebi enak ternyata feelnya WKWKKWKW soalnya "orang lain" nya km sih yaa</div>
                </div>
            </div>

            <div class="item">
                <img src="images/cth1.jpg" style="border-radius: 20px;">
                <div class="introduce">
                    <div class="title">KITA MENJELAJAHI ALSUT KE IKEAAA</div>
                    <div class="des">seruuu bgttt kita pergi berdua kesini liat-liatt barang something sampai akhirnya mas tersadarkan bahwa "ayo kerja mesaya, km butu duid" langsung keinget ininya mas sayang WKWKWWKWKW brasaa kaya udaa lama bgt rasanya abis kita dari sini, kangen kesini sama km hehe oiyaa rambut km cantikkkk dikepang gituu LUCUUUUU BGTTTTTTT ASTAGAA (INI MAS SKARANG JADI MAU NGESPAM DISINI RASANYA, TAPI NANTI PENUH WEBNYA) walopun mas pen baku hantam sama helmnya, jadi km pakee topii, TAPIII KM CANTIKKK BGTTT, mas sangat appreciate & respect km siap-siap, km cantik bgtt. untung sbelum km brangkat, mas uda liat pap km foto ini, CANTIKKK BGTTT SAYANG, mas baru pertama kali liat rambut km dikepang kaya ini, cantikkkk bgtttt km.</div>
                </div>
            </div>
                
                <div class="item">
                <img src="images/cth0.jpg" style="width: auto; height: 80%">
                <div class="introduce">
                    <div class="title">Kita keliling alsutt mencari kitab suci (bukan ya WKWKWKWK)</div>
                    <div class="des">km lucuuu bgttt moto inii, mas pas lagi iseng-iseng buka galeri lagi, LUCUUU BGTTT ADA POTO INI WKWKWKW seruu bgtttt kita jalan-jalan sampe akhirnya km ketemu trus ngobrol sama temen mas pertama kali WKWKWKWKW kita mam ayam bakar madu yang skarang syuda digusur sedi bgt, padahal mas juga masi kepengen mam ini, tapi untung uda perna ngajak km buat mam ini, jadi akhirnya kita berdua mam ayam bakarnyaa. naik motor kemana mana seruu kan yaa, tapi rasanya lebih seruu lagi pas sama km, ini km ajak mas kemana aja juga mas gas-gas aja ini sayang WKWKKWKW</div>
                </div>
            </div>

            <div class="item">
                <img src="images/vior.png" style="width: 100%; height: 100%">
                <div class="introduce">
                    <div class="title">entah kenapa jadi keinget begini masnya sama ini sayang alamak</div>
                    <div class="des">ini mas gabisa ngomong banyak ya WKWKKWKWKW</div>
                </div>
            </div>

<!--             <div class="item"></div>
                <div class="introduce">
                    <div class="title">oiya intermezzo dulu ini sbenernya mas masii banyakk bgtt yang mau mas masukin kesini</div>
                    <div class="des">apaa ini nanti bakal mas update terus ajaa kali yaa WKWKWWKW, nanti abis ini masuk ke fase maintenance webnya WKWKWWKW</div>
                </div>
            </div> -->

            <div class="item">
                <img src="images/cth2.jpg" style="border-radius: 20px;">
                <div class="introduce">
                    <div class="title">ikutt natall km bareng temen-temen km</div>
                    <div class="des">temen temen mas juga ikut sihh, walopun tiba-tiba mereka jadi berulah ingin mas slepet yah, cuma jangan deh sayang soalnya uda mau nemenin masnya WKWKWKW oiyaaa fotosyut dadakannya jugaa seruu, "mas.. mau gendong" "boleee" WKWKWKKW mas masi inget bgt randomnya kita disana WKWKWKWKW walopun pas mas pulang ini kunci motor masnya hampir ilang, ternyata mas yang lupa naronya, untung ketemu, uda panik 10 menit ini masnya sayang (stiker nangis wa). oiyaa btw km make baju tamborin pink ini lucuuu. love u (tiba tiba bilang ini soalnya tiba tiba juga keinget banyak hal)</div>
                </div>
            </div>

            <div class="item">
                <img src="images/cth4.jpg" style="border-radius: 20px;">
                <div class="introduce">
                    <div class="title">NATALANN LAGIIII????</div>
                    <div class="des">WAHHH KALOO INI SIHH DARI PERSIAPANN NATALANNYA SAMA PAS NATALANN SIH DEBESS YAA SERUU BGTTTT, MAS GABAKALAN BISA LUPA INI SIH ALAMAKK, mulai dari nyiapin di greja bareng sama km juga, abis itu nyiapin di gedungnya jugaa, abis ituu NATALANNYAA PALING SERU BGTT BGTTT BGTTTTT, ketemu temen km juga si jopin (versi alim (?)) WKWKWKKWW tapii (duhh sayang jiwa jiwa "abang" mas tiba tiba mau muncul) semuanya seru sampe mas BANGGA BGTT kalo km bisa amann pake bgt tamborinnya, INGETT INI JADI KEINGET LAGI KALO KM KERENNN BGTTT (DIMANAA STIKER NANGIS WA INI ALAMAKKK GABISA MAKE). inii jugaa becanda-becanda sama temen greja yang lainnya jugaa seruu skalih sampe alena mimpi kalo ngeliat kita kaya orang pacaran WKWKWKWKKW</div>
                </div>
            </div>

            <div class="item">
                <img src="images/cth3.jpg" style="border-radius: 20px;">
                <div class="introduce">
                    <div class="title">NATALANN LAGIIII????(1) WKWKKWWKKW</div>
                    <div class="des">"i beg u to forgive me sayang" WKWKKWKKW</div>
                </div>
            </div>

            </div>

        </div>
        <div class="arrows">
            <button id="prev"><</button>
            <button id="next">></button>
        </div>
        
        <div class="button-container">
            <div class="arrow">&#8595;</div>
            <div class="controls-wrapper">
                <button id="playAudio" class="control-button">
                    <i class="fas fa-music"></i>
                    <span>MAS NYANYI BUAT KM WKWKWKW</span>
                </button>
                <button id="showVideo" class="control-button video-button">
                    <i class="fas fa-video"></i>
                    <span>cobaa klik ini juga sayang</span>
                </button>
            </div>  
        </div>
    </div>

    <audio id="backgroundAudio" loop>
        <source src="blue_yungkai_for_her.wav" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div class="video-popup" id="videoPopup1">
        <div class="video-container">
            <div class="video-wrapper">
                <video id="videoPlayer1" muted playsinline disablepictureinpicture nocontrols>
                    <source src="images/ayam.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <button class="close-video" id="closeVideo1">&times;</button>
            </div>
        </div>
    </div>

    <div class="video-popup" id="videoPopup2">
        <div class="video-container">
            <div class="video-wrapper">
                <video id="videoPlayer2" controls muted>
                    <source src="images/dress.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <button class="close-video" id="closeVideo2">&times;</button>
            </div>
        </div>
    </div>

    <div class="video-popup" id="videoPopup3">
        <div class="video-container">
            <div class="video-wrapper">
                <video id="videoPlayer3" controls muted>
                    <source src="images/ikea.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <button class="close-video" id="closeVideo3">&times;</button>
            </div>
        </div>
    </div>

    <div class="video-popup" id="videoPopup4">
        <div class="video-container">
            <div class="video-wrapper">
                <video id="videoPlayer4" controls muted>
                    <source src="images/lucu.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <button class="close-video" id="closeVideo4">&times;</button>
            </div>
        </div>
    </div>

    <div class="video-popup" id="videoPopup5">
        <div class="video-container">
            <div class="video-wrapper">
                <video id="videoPlayer5" controls muted>
                    <source src="images/sailor.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <button class="close-video" id="closeVideo5">&times;</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        const audioPlayer = document.getElementById('backgroundAudio');
        const playButton = document.getElementById('playAudio');
        const videoButton = document.getElementById('showVideo');
        
        // Tambahkan array untuk melacak particle yang aktif
        const activeParticles = [];
        const MAX_PARTICLES = 20; // Batasi jumlah maksimal particle
        
        function createLoveParticle(x, y) {
            if (activeParticles.length >= MAX_PARTICLES) return;
            
            const particle = document.createElement('div');
            particle.className = 'love-particle';
            particle.innerHTML = ['â™¥', 'ðŸ’•', 'ðŸ’—'][Math.floor(Math.random() * 3)];
            particle.style.left = x + 'px';
            particle.style.top = y + 'px';
            
            const randomX = (Math.random() - 0.5) * 200;
            const randomRotate = (Math.random() - 0.5) * 360;
            particle.style.setProperty('--x', randomX + 'px');
            particle.style.setProperty('--r', randomRotate + 'deg');
            
            // Tambahkan transition untuk smooth appearance
            particle.style.opacity = '0';
            particle.style.transform = 'scale(0.5)';
            
            document.body.appendChild(particle);
            
            // Force reflow
            void particle.offsetWidth;
            
            // Animate in
            particle.style.opacity = '1';
            particle.style.transform = 'scale(1)';
            
            activeParticles.push(particle);
            
            // Smooth fade out
            setTimeout(() => {
                particle.style.opacity = '0';
                particle.style.transform = 'scale(0.5) translateY(-20px)';
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                    const index = activeParticles.indexOf(particle);
                    if (index > -1) {
                        activeParticles.splice(index, 1);
                    }
                }, 400);
            }, 3600);
        }
        
        let isCreatingParticles = false;
        let particleInterval;
        
        function startParticleCreation(e) {
            if (isCreatingParticles) return;
            isCreatingParticles = true;
            
            const buttonRect = playButton.getBoundingClientRect();
            const centerX = buttonRect.left + buttonRect.width / 2;
            const centerY = buttonRect.top;
            
            // Fungsi untuk membuat satu batch particle
            function createParticleBatch() {
                for (let i = 0; i < 5; i++) { // Kurangi jumlah particle per batch
                    createLoveParticle(
                        centerX + (Math.random() - 0.5) * 200,
                        centerY + (Math.random() - 0.5) * 100
                    );
                }
            }
            
            // Buat batch pertama
            createParticleBatch();
            
            // Set interval untuk batch berikutnya
            particleInterval = setInterval(createParticleBatch, 2000); // Interval lebih lama
        }
        
        function stopParticleCreation() {
            isCreatingParticles = false;
            clearInterval(particleInterval);
        }
        
        const videoData = [
            { src: 'images/ayam.mp4', controls: false, muted: true, playsinline: true, disablePictureInPicture: true },
            { src: 'images/dress.mp4', controls: true, muted: true },
            { src: 'images/ikea.mp4', controls: true, muted: true },
            { src: 'images/lucu.mp4', controls: true, muted: true },
            { src: 'images/sailor.mp4', controls: true, muted: true }
        ];

        let currentVideoIndex = 0;
        const totalVideos = videoData.length;
        let isVideoPlaying = false;
        
        function showNextVideo() {
            // Hide current video if any
            const currentPopup = document.getElementById(`videoPopup${currentVideoIndex}`);
            if (currentPopup) {
                currentPopup.classList.remove('show');
                const currentPlayer = document.getElementById(`videoPlayer${currentVideoIndex}`);
                if (currentPlayer) {
                    currentPlayer.pause();
                    currentPlayer.currentTime = 0;
                }
            }
            
            // Update index and show next video
            currentVideoIndex = (currentVideoIndex % totalVideos) + 1;
            const nextPopup = document.getElementById(`videoPopup${currentVideoIndex}`);
            const nextPlayer = document.getElementById(`videoPlayer${currentVideoIndex}`);
            
            if (nextPopup && nextPlayer) {
                nextPopup.classList.add('show');
                try {
                    const playPromise = nextPlayer.play();
                    if (playPromise !== undefined) {
                        playPromise.catch(error => {
                            console.log("Video autoplay prevented:", error);
                        });
                    }
                } catch (error) {
                    console.log("Error playing video:", error);
                }
            }
        }
        
        function stopAllVideos() {
            isVideoPlaying = false;
            for(let i = 1; i <= totalVideos; i++) {
                const popup = document.getElementById(`videoPopup${i}`);
                const player = document.getElementById(`videoPlayer${i}`);
                if (popup && player) {
                    popup.classList.remove('show');
                    player.pause();
                    player.currentTime = 0;
                }
            }
        }
        
        // Audio control
        playButton.addEventListener('click', function(e) {
            if (audioPlayer.paused) {
                audioPlayer.play().then(() => {
                    playButton.innerHTML = '<i class="fas fa-pause"></i><span>kalo mau ngepause, klik lagi aja yaa</span>';
                    startParticleCreation(e);
                }).catch(error => {
                    console.log("Audio autoplay prevented:", error);
                });
            } else {
                audioPlayer.pause();
                playButton.innerHTML = '<i class="fas fa-music"></i><span>MAS NYANYI BUAT KM WKWKWKW</span>';
                stopParticleCreation();
            }
        });
        
        // Video control
        videoButton.addEventListener('click', function() {
            if (!isVideoPlaying) {
                isVideoPlaying = true;
                videoButton.innerHTML = '<i class="fas fa-video-slash"></i><span>TUTUP VIDEO</span>';
                showNextVideo();
            } else {
                isVideoPlaying = false;
                videoButton.innerHTML = '<i class="fas fa-video"></i><span>cobaa km klik lagii sayang</span>';
                stopAllVideos();
            }
        });
        
        // Handle video end
        for(let i = 1; i <= totalVideos; i++) {
            const videoPlayer = document.getElementById(`videoPlayer${i}`);
            const closeButton = document.getElementById(`closeVideo${i}`);
            
            if (videoPlayer) {
                videoPlayer.addEventListener('ended', function() {
                    const popup = document.getElementById(`videoPopup${i}`);
                    if (popup) {
                        popup.classList.remove('show');
                    }
                });
            }
            
            if (closeButton) {
                closeButton.addEventListener('click', function() {
                    const popup = document.getElementById(`videoPopup${i}`);
                    const player = document.getElementById(`videoPlayer${i}`);
                    if (popup && player) {
                        popup.classList.remove('show');
                        player.pause();
                        player.currentTime = 0;
                    }
                });
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const startButton = document.querySelector('.start-button');
            const introContainer = document.querySelector('.intro-container');
            const introContent = document.querySelector('.intro-content');
            const loader = document.querySelector('.loader');
            const carousel = document.querySelector('.carousel');
            const warningText = document.querySelector('h5');
            
            if (carousel) carousel.style.display = 'none';
            if (warningText) warningText.style.display = 'none';
            
            startButton.addEventListener('click', () => {
                startButton.disabled = true;
                
                introContent.style.opacity = '0';
                introContent.style.transform = 'translateY(-20px)';
                
                setTimeout(() => {
                    introContainer.classList.add('fade-out');
                    loader.style.display = 'flex';
                    
                    // Reset progress bar animation
                    const progressBar = document.querySelector('.progress-bar');
                    progressBar.style.animation = 'none';
                    void progressBar.offsetWidth;
                    progressBar.style.animation = 'progress 1.2s ease-in-out forwards';
                    
                    requestAnimationFrame(() => {
                        loader.style.opacity = '1';
                        loader.style.visibility = 'visible';
                        
                        // Modifikasi animasi untuk loading text
                        const letters = document.querySelectorAll('.loading-text span');
                        letters.forEach((letter, index) => {
                            letter.style.animation = 'none';
                            void letter.offsetWidth;
                            // Ubah animasi fadeInOut agar tidak menghilang sepenuhnya
                            letter.style.animation = `loadingTextPulse 1.5s infinite ${index * 0.1}s`;
                            letter.style.opacity = '1'; // Pastikan huruf tetap terlihat
                        });
                    });
                    
                    setTimeout(() => {
                        loader.style.opacity = '0';
                        
                        setTimeout(() => {
                            loader.style.display = 'none';
                            
                            if (carousel) {
                                carousel.style.display = 'block';
                                if (warningText) warningText.style.display = 'block';
                                
                                void carousel.offsetWidth;
                                
                                requestAnimationFrame(() => {
                                    carousel.classList.add('show');
                                    
                                    if (warningText) {
                                        warningText.style.opacity = '0';
                                        warningText.style.transform = 'translateY(20px)';
                                        
                                        requestAnimationFrame(() => {
                                            warningText.style.opacity = '1';
                                            warningText.style.transform = 'translateY(0)';
                                        });
                                    }
                                });
                            }
                        }, 800);
                    }, 1200);
                }, 400);
            });

            // Add smooth scroll behavior
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });

            // Hapus semua video popup HTML statis
            createVideoPopups();
            initializeVideoControls();
        });

        // Ganti semua video popup HTML statis dengan fungsi ini
        function createVideoPopups() {
            const popupContainer = document.createElement('div');
            popupContainer.id = 'video-popups-container';
            
            videoData.forEach((video, index) => {
                const popupHTML = `
                    <div class="video-popup" id="videoPopup${index + 1}">
                        <div class="video-container">
                            <div class="video-wrapper">
                                <video id="videoPlayer${index + 1}"
                                    ${video.controls ? 'controls' : ''}
                                    ${video.muted ? 'muted' : ''}
                                    ${video.playsinline ? 'playsinline' : ''}
                                    ${video.disablePictureInPicture ? 'disablepictureinpicture' : ''}
                                    ${video.nocontrols ? 'nocontrols' : ''}>
                                    <source src="${video.src}" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                                <button class="close-video" id="closeVideo${index + 1}">&times;</button>
                            </div>
                        </div>
                    </div>
                `;
                popupContainer.insertAdjacentHTML('beforeend', popupHTML);
            });
            
            document.body.appendChild(popupContainer);
        }

        // Update event listener initialization
        function initializeVideoControls() {
            for(let i = 1; i <= totalVideos; i++) {
                const videoPlayer = document.getElementById(`videoPlayer${i}`);
                const closeButton = document.getElementById(`closeVideo${i}`);
                
                if (videoPlayer) {
                    videoPlayer.addEventListener('ended', function() {
                        const popup = document.getElementById(`videoPopup${i}`);
                        if (popup) {
                            popup.classList.remove('show');
                            if (isVideoPlaying) {
                                showNextVideo();
                            }
                        }
                    });
                }
                
                if (closeButton) {
                    closeButton.addEventListener('click', function() {
                        const popup = document.getElementById(`videoPopup${i}`);
                        const player = document.getElementById(`videoPlayer${i}`);
                        if (popup && player) {
                            popup.classList.remove('show');
                            player.pause();
                            player.currentTime = 0;
                        }
                    });
                }
            }
        }
    </script>
</body>
</html>